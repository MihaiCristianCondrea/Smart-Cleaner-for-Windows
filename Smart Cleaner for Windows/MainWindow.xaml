<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="Smart_Cleaner_for_Windows.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:Smart_Cleaner_for_Windows"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="Smart Cleaner for Windows">

    <Grid>
        <NavigationView
            x:Name="RootNavigation"
            IsBackButtonVisible="Collapsed"
            IsSettingsVisible="True"
            PaneDisplayMode="Left"
            CompactPaneLength="56"
            OpenPaneLength="260"
            IsPaneToggleButtonVisible="True"
            SelectionFollowsFocus="Disabled"
            AlwaysShowHeader="False"
            IsTitleBarAutoPaddingEnabled="False"
            SelectionChanged="OnNavigationSelectionChanged"
            Loaded="OnNavigationLoaded">

            <NavigationView.Resources>
                <CornerRadius x:Key="CardCornerRadius">20</CornerRadius>
                <LinearGradientBrush x:Key="HeroCardBrush" StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="{StaticResource Color.BrandPrimary}" Offset="0" />
                    <GradientStop Color="{StaticResource Color.BrandSecondary}" Offset="1" />
                </LinearGradientBrush>
                <SolidColorBrush x:Key="HeroCardOverlayBrush" Color="{StaticResource Color.BrandOverlay}" />
                <Style x:Key="CardStyle" TargetType="Border">
                    <Setter Property="Background" Value="{ThemeResource LayerFillColorDefaultBrush}" />
                    <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}" />
                    <Setter Property="BorderThickness" Value="1" />
                    <Setter Property="CornerRadius" Value="{StaticResource CardCornerRadius}" />
                    <Setter Property="Padding" Value="{StaticResource Padding.Card}" />
                </Style>
                <Style TargetType="ListViewItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                    <Setter Property="Padding" Value="0" />
                    <Setter Property="Margin" Value="0,0,0,12" />
                    <Setter Property="Background" Value="Transparent" />
                </Style>
            </NavigationView.Resources>

        <NavigationView.MenuItems>
            <NavigationViewItem x:Name="DashboardItem" Content="Dashboard" IsSelected="True">
                <NavigationViewItem.Icon>
                    <SymbolIcon Symbol="Home" />
                </NavigationViewItem.Icon>
            </NavigationViewItem>
            <NavigationViewItem x:Name="EmptyFoldersItem" Content="Empty folders">
                <NavigationViewItem.Icon>
                    <SymbolIcon Symbol="Folder" />
                </NavigationViewItem.Icon>
            </NavigationViewItem>
            <NavigationViewItem x:Name="LargeFilesItem" Content="Large files">
                <NavigationViewItem.Icon>
                    <SymbolIcon Symbol="SaveLocal" />
                </NavigationViewItem.Icon>
            </NavigationViewItem>
            <NavigationViewItem x:Name="DiskCleanupItem" Content="Disk cleanup">
                <NavigationViewItem.Icon>
                    <SymbolIcon Symbol="Delete" />
                </NavigationViewItem.Icon>
            </NavigationViewItem>
        </NavigationView.MenuItems>

            <NavigationView.Content>
                <Grid>
                    <ScrollViewer x:Name="DashboardView" HorizontalScrollBarVisibility="Disabled">
                        <StackPanel Padding="{StaticResource Padding.Page}" Spacing="{StaticResource Spacing.Size240}">
                            <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size160}" VerticalAlignment="Center">
                            <Border
                                Width="56"
                                Height="56"
                                CornerRadius="18"
                                Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                VerticalAlignment="Center">
                                <Image
                                    Source="ms-appx:///Assets/Square44x44Logo.scale-200.png"
                                    Stretch="Uniform"
                                    Width="36"
                                    Height="36"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center" />
                            </Border>
                            <StackPanel Spacing="{StaticResource Spacing.Size40}" VerticalAlignment="Center">
                                <TextBlock Text="Dashboard" FontSize="32" FontWeight="SemiBold" />
                                <TextBlock
                                    Text="Choose a tool to continue."
                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                            </StackPanel>
                            </StackPanel>

                            <Border Style="{StaticResource CardStyle}">
                                <StackPanel Spacing="{StaticResource Spacing.Size160}">
                                <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}">
                                    <Border
                                        Width="48"
                                        Height="48"
                                        CornerRadius="16"
                                        Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                        VerticalAlignment="Center">
                                        <FontIcon
                                            Glyph="&#xE8A0;"
                                            FontFamily="Segoe MDL2 Assets"
                                            Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center" />
                                    </Border>
                                    <StackPanel>
                                        <TextBlock Text="Storage overview" FontSize="22" FontWeight="SemiBold" />
                                        <TextBlock
                                            x:Name="StorageSummaryText"
                                            Text="Collecting drive information…"
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                            TextWrapping="WrapWholeWords" />
                                    </StackPanel>
                                </StackPanel>
                                <ItemsControl x:Name="DriveUsageList">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Spacing="{StaticResource Spacing.Size120}" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Grid ColumnSpacing="{StaticResource Spacing.Size120}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="160" />
                                                </Grid.ColumnDefinitions>
                                                <StackPanel Spacing="{StaticResource Spacing.Size40}">
                                                    <TextBlock Text="{Binding Name}" FontWeight="SemiBold" />
                                                    <TextBlock
                                                        Text="{Binding Details}"
                                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                        TextWrapping="Wrap" />
                                                </StackPanel>
                                                <StackPanel Grid.Column="1" Spacing="{StaticResource Spacing.Size40}" VerticalAlignment="Center">
                                                    <ProgressBar Minimum="0" Maximum="100" Value="{Binding UsedPercentage}" Height="6" />
                                                    <TextBlock
                                                        Text="{Binding UsageSummary}"
                                                        HorizontalAlignment="Right"
                                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                                </StackPanel>
                                            </Grid>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                                <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size80}">
                                    <FontIcon
                                        Glyph="&#xE946;"
                                        FontFamily="Segoe MDL2 Assets"
                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                        VerticalAlignment="Center" />
                                    <TextBlock
                                        x:Name="StorageTipText"
                                        Text="Keep an eye on your drives to maintain performance."
                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                        TextWrapping="WrapWholeWords" />
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel Spacing="16">
                                <StackPanel Orientation="Horizontal" Spacing="12">
                                    <Border
                                        Width="48"
                                        Height="48"
                                        CornerRadius="16"
                                        Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                        VerticalAlignment="Center">
                                        <SymbolIcon
                                            Symbol="Folder"
                                            Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center" />
                                    </Border>
                                    <StackPanel>
                                        <TextBlock Text="Empty folders cleaner" FontSize="22" FontWeight="SemiBold" />
                                        <TextBlock
                                            Text="Scan for empty directories and remove them safely."
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                    </StackPanel>
                                </StackPanel>
                                <Button Click="OnNavigateToEmptyFolders">
                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                        <SymbolIcon Symbol="Play" />
                                        <TextBlock Text="Open empty folders cleaner" />
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel Spacing="16">
                                <StackPanel Orientation="Horizontal" Spacing="12">
                                    <Border
                                        Width="48"
                                        Height="48"
                                        CornerRadius="16"
                                        Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                        VerticalAlignment="Center">
                                        <SymbolIcon
                                            Symbol="SaveLocal"
                                            Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center" />
                                    </Border>
                                    <StackPanel>
                                        <TextBlock Text="Large files explorer" FontSize="22" FontWeight="SemiBold" />
                                        <TextBlock
                                            Text="Find the biggest files by type and reclaim space quickly."
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                            TextWrapping="Wrap" />
                                    </StackPanel>
                                </StackPanel>
                                <Button Click="OnNavigateToLargeFiles">
                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                        <SymbolIcon Symbol="SaveLocal" />
                                        <TextBlock Text="Open large files explorer" />
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel Spacing="16">
                                <StackPanel Orientation="Horizontal" Spacing="12">
                                    <Border
                                        Width="48"
                                        Height="48"
                                        CornerRadius="16"
                                        Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                        VerticalAlignment="Center">
                                        <FontIcon
                                            Glyph="&#xE74D;"
                                            FontFamily="Segoe MDL2 Assets"
                                            Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center" />
                                    </Border>
                                    <StackPanel>
                                        <TextBlock Text="Disk cleanup" FontSize="22" FontWeight="SemiBold" />
                                        <TextBlock
                                            Text="Analyze Windows cleanup handlers and free up disk space."
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                            TextWrapping="Wrap" />
                                    </StackPanel>
                                </StackPanel>
                                <Button Click="OnNavigateToDiskCleanup">
                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                        <SymbolIcon Symbol="Delete" />
                                        <TextBlock Text="Open disk cleanup" />
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </ScrollViewer>

                <ScrollViewer
                    x:Name="EmptyFoldersView"
                    HorizontalScrollBarVisibility="Disabled"
                    Visibility="Collapsed">
                    <Grid Padding="{StaticResource Padding.Page}" RowSpacing="{StaticResource Spacing.Size240}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <Border
                            x:Name="StatusHero"
                            Grid.Row="0"
                            Background="{StaticResource Brush.Hero.Neutral}"
                            CornerRadius="28"
                            Padding="{StaticResource Padding.Hero}">
                            <Grid ColumnSpacing="{StaticResource Spacing.Size240}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <Border
                                    Width="76"
                                    Height="76"
                                    CornerRadius="24"
                                    Background="{StaticResource HeroCardOverlayBrush}"
                                    VerticalAlignment="Center">
                                    <SymbolIcon
                                        x:Name="StatusGlyph"
                                        Symbol="Folder"
                                        Foreground="White"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center" />
                                </Border>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center" Spacing="{StaticResource Spacing.Size80}">
                                    <TextBlock
                                        Text="Cleanup overview"
                                        Foreground="#B3FFFFFF"
                                        FontWeight="SemiBold" />
                                    <TextBlock
                                        x:Name="StatusTitle"
                                        Text="Ready when you are"
                                        FontSize="30"
                                        FontWeight="SemiBold"
                                        Foreground="White"
                                        TextWrapping="Wrap" />
                                    <TextBlock
                                        x:Name="StatusDescription"
                                        Text="Select a folder to begin."
                                        Foreground="#E6FFFFFF"
                                        TextWrapping="WrapWholeWords" />
                                </StackPanel>

                                <StackPanel Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Right" Spacing="{StaticResource Spacing.Size40}">
                                    <TextBlock Text="Current results" Foreground="#B3FFFFFF" />
                                    <InfoBadge
                                        x:Name="ResultBadge"
                                        HorizontalAlignment="Right"
                                        Visibility="Collapsed" />
                                </StackPanel>
                            </Grid>
                        </Border>

                        <Grid x:Name="EmptyFoldersLayout" Grid.Row="1" ColumnSpacing="{StaticResource Spacing.Size240}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition x:Name="EmptyFoldersPrimaryColumn" Width="*" />
                                <ColumnDefinition x:Name="EmptyFoldersSecondaryColumn" Width="360" />
                            </Grid.ColumnDefinitions>

                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup>
                                    <VisualState x:Name="EmptyFoldersCompactState">
                                        <VisualState.StateTriggers>
                                            <AdaptiveTrigger MinWindowWidth="0" />
                                        </VisualState.StateTriggers>
                                        <VisualState.Setters>
                                            <Setter Target="EmptyFoldersSecondaryColumn.Width" Value="0" />
                                            <Setter Target="EmptyFoldersLayout.ColumnSpacing" Value="{StaticResource Spacing.Size160}" />
                                            <Setter Target="EmptyFoldersPrimaryPanel.(Grid.ColumnSpan)" Value="2" />
                                            <Setter Target="EmptyFoldersDetailsPanel.(Grid.Row)" Value="1" />
                                            <Setter Target="EmptyFoldersDetailsPanel.(Grid.Column)" Value="0" />
                                            <Setter Target="EmptyFoldersDetailsPanel.(Grid.ColumnSpan)" Value="2" />
                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="EmptyFoldersMediumState">
                                        <VisualState.StateTriggers>
                                            <AdaptiveTrigger MinWindowWidth="840" />
                                        </VisualState.StateTriggers>
                                        <VisualState.Setters>
                                            <Setter Target="EmptyFoldersSecondaryColumn.Width" Value="320" />
                                            <Setter Target="EmptyFoldersLayout.ColumnSpacing" Value="{StaticResource Spacing.Size240}" />
                                            <Setter Target="EmptyFoldersPrimaryPanel.(Grid.ColumnSpan)" Value="1" />
                                            <Setter Target="EmptyFoldersDetailsPanel.(Grid.Row)" Value="0" />
                                            <Setter Target="EmptyFoldersDetailsPanel.(Grid.Column)" Value="1" />
                                            <Setter Target="EmptyFoldersDetailsPanel.(Grid.ColumnSpan)" Value="1" />
                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="EmptyFoldersWideState">
                                        <VisualState.StateTriggers>
                                            <AdaptiveTrigger MinWindowWidth="1024" />
                                        </VisualState.StateTriggers>
                                        <VisualState.Setters>
                                            <Setter Target="EmptyFoldersSecondaryColumn.Width" Value="360" />
                                            <Setter Target="EmptyFoldersLayout.ColumnSpacing" Value="{StaticResource Spacing.Size240}" />
                                        </VisualState.Setters>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>

                            <StackPanel x:Name="EmptyFoldersPrimaryPanel" Grid.Column="0" Spacing="{StaticResource Spacing.Size160}">
                                <Border Style="{StaticResource CardStyle}">
                                    <Grid RowSpacing="{StaticResource Spacing.Size200}">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>

                                        <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}">
                                            <Border
                                                Width="40"
                                                Height="40"
                                                CornerRadius="14"
                                                Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                                VerticalAlignment="Center">
                                                <SymbolIcon
                                                    Symbol="Folder"
                                                    Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center" />
                                            </Border>
                                            <StackPanel>
                                                <TextBlock Text="Root folder" FontSize="22" FontWeight="SemiBold" />
                                                <TextBlock
                                                    Text="Pick a starting location to scan for empty directories."
                                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                            </StackPanel>
                                        </StackPanel>

                                        <StackPanel Grid.Row="1" Spacing="{StaticResource Spacing.Size160}">
                                            <Grid ColumnSpacing="{StaticResource Spacing.Size120}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>
                                                <TextBox
                                                    x:Name="RootPathBox"
                                                    Grid.Column="0"
                                                    PlaceholderText="Select a root folder…"
                                                    TextChanged="RootPathBox_TextChanged" />
                                                <Button x:Name="BrowseBtn" Grid.Column="1" Click="OnBrowse">
                                                    <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size60}">
                                                        <SymbolIcon Symbol="OpenFile" />
                                                        <TextBlock Text="Browse" />
                                                    </StackPanel>
                                                </Button>
                                            </Grid>
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="{StaticResource Spacing.Size80}">
                                                <Button x:Name="PreviewBtn" Click="OnPreview">
                                                    <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size60}">
                                                        <SymbolIcon Symbol="PreviewLink" />
                                                        <TextBlock Text="Preview" />
                                                    </StackPanel>
                                                </Button>
                                                <Button x:Name="DeleteBtn" Click="OnDelete" IsEnabled="False">
                                                    <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size60}">
                                                        <SymbolIcon Symbol="Delete" />
                                                        <TextBlock Text="Clean now" />
                                                    </StackPanel>
                                                </Button>
                                            </StackPanel>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <Border Style="{StaticResource CardStyle}">
                                    <StackPanel Spacing="{StaticResource Spacing.Size200}">
                                        <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}">
                                            <Border
                                                Width="40"
                                                Height="40"
                                                CornerRadius="14"
                                                Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                                VerticalAlignment="Center">
                                                <SymbolIcon
                                                    Symbol="Setting"
                                                    Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center" />
                                            </Border>
                                            <StackPanel>
                                                <TextBlock Text="Scan options" FontSize="22" FontWeight="SemiBold" />
                                                <TextBlock
                                                    Text="Customize how the cleaner behaves before you run a scan."
                                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                            </StackPanel>
                                        </StackPanel>

                                        <StackPanel Spacing="{StaticResource Spacing.Size160}">
                                            <CheckBox x:Name="RecycleChk" IsChecked="True">
                                                <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size80}">
                                                    <FontIcon Glyph="&#xE107;" FontFamily="Segoe MDL2 Assets" />
                                                    <TextBlock Text="Send deleted folders to Recycle Bin" />
                                                </StackPanel>
                                            </CheckBox>

                                            <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}" VerticalAlignment="Center">
                                                <SymbolIcon
                                                    Symbol="Sort"
                                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                                <TextBlock VerticalAlignment="Center" Text="Depth limit" />
                                                <NumberBox
                                                    x:Name="DepthBox"
                                                    Width="96"
                                                    Minimum="0"
                                                    Maximum="999"
                                                    Value="0" />
                                            </StackPanel>

                                            <StackPanel Spacing="{StaticResource Spacing.Size40}">
                                                <TextBlock Text="Exclusions" FontWeight="SemiBold" />
                                                <TextBox
                                                    x:Name="ExcludeBox"
                                                    PlaceholderText=".git; build/*; node_modules"
                                                    AcceptsReturn="False" />
                                                <TextBlock
                                                    Text="Use semicolons to separate names or wildcard patterns."
                                                    FontSize="12"
                                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                            </StackPanel>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                            </StackPanel>

                            <StackPanel x:Name="EmptyFoldersDetailsPanel" Grid.Column="1" Spacing="{StaticResource Spacing.Size160}">
                                <Border Style="{StaticResource CardStyle}">
                                    <StackPanel Spacing="{StaticResource Spacing.Size160}">
                                        <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}">
                                            <Border
                                                Width="40"
                                                Height="40"
                                                CornerRadius="14"
                                                Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                                VerticalAlignment="Center">
                                                <SymbolIcon
                                                    Symbol="Clock"
                                                    Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center" />
                                            </Border>
                                            <TextBlock Text="Activity" FontSize="22" FontWeight="SemiBold" VerticalAlignment="Center" />
                                        </StackPanel>

                                        <TextBlock
                                            x:Name="ActivityText"
                                            Text="Waiting for the next action."
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                            TextWrapping="Wrap" />

                                        <ProgressBar
                                            x:Name="Progress"
                                            Height="4"
                                            Visibility="Collapsed"
                                            IsIndeterminate="True" />

                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                            <Button x:Name="CancelBtn" Click="OnCancel" Visibility="Collapsed" IsEnabled="False">
                                                <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size60}">
                                                    <SymbolIcon Symbol="Cancel" />
                                                    <TextBlock Text="Cancel" />
                                                </StackPanel>
                                            </Button>
                                        </StackPanel>

                                        <InfoBar x:Name="Info" IsOpen="False" />
                                    </StackPanel>
                                </Border>

                                <Border Style="{StaticResource CardStyle}">
                                    <StackPanel Spacing="{StaticResource Spacing.Size120}">
                                        <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}">
                                            <Border
                                                Width="40"
                                                Height="40"
                                                CornerRadius="14"
                                                Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                                VerticalAlignment="Center">
                                                <SymbolIcon
                                                    Symbol="Favorite"
                                                    Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center" />
                                            </Border>
                                            <TextBlock Text="Cleaner highlights" FontSize="22" FontWeight="SemiBold" VerticalAlignment="Center" />
                                        </StackPanel>

                                        <StackPanel Spacing="{StaticResource Spacing.Size120}">
                                            <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size80}">
                                                <SymbolIcon Symbol="PreviewLink" Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                                <TextBlock
                                                    Text="Preview empty directories before committing to a cleanup."
                                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                    TextWrapping="Wrap" />
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size80}">
                                                <SymbolIcon Symbol="ProtectedDocument" Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                                <TextBlock
                                                    Text="Recycle Bin support keeps removals safe."
                                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                    TextWrapping="Wrap" />
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal" Spacing="8">
                                                <SymbolIcon Symbol="Filter" Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                                <TextBlock
                                                    Text="Exclude directories with custom rules to stay in control."
                                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                    TextWrapping="Wrap" />
                                            </StackPanel>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </Grid>

                        <Border Grid.Row="2" Style="{StaticResource CardStyle}">
                            <Grid RowSpacing="16">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>

                                <StackPanel Orientation="Horizontal" Spacing="12">
                                    <Border
                                        Width="40"
                                        Height="40"
                                        CornerRadius="14"
                                        Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                        VerticalAlignment="Center">
                                        <SymbolIcon
                                            Symbol="Preview"
                                            Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center" />
                                    </Border>
                                    <TextBlock Text="Preview results" FontSize="22" FontWeight="SemiBold" VerticalAlignment="Center" />
                                </StackPanel>

                                <TextBlock
                                    Grid.Row="1"
                                    x:Name="ResultsCaption"
                                    Text="Preview results will appear here once you run a scan."
                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}" />

                                <Grid Grid.Row="2" RowSpacing="{StaticResource Spacing.Size120}">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="*" />
                                    </Grid.RowDefinitions>

                                    <Grid
                                        Grid.Row="0"
                                        ColumnSpacing="{StaticResource Spacing.Size120}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <TextBox
                                            x:Name="CandidateSearchBox"
                                            Grid.Column="0"
                                            PlaceholderText="Search paths"
                                            TextChanged="CandidateSearchBox_TextChanged" />

                                        <ComboBox
                                            x:Name="PathFilterBox"
                                            Grid.Column="1"
                                            Width="180"
                                            PlaceholderText="All paths"
                                            SelectionChanged="PathFilterBox_SelectionChanged" />

                                        <ComboBox
                                            x:Name="SortModeBox"
                                            Grid.Column="2"
                                            Width="180"
                                            SelectionChanged="SortModeBox_SelectionChanged">
                                            <ComboBoxItem Content="Path (A to Z)" Tag="NameAscending" IsSelected="True" />
                                            <ComboBoxItem Content="Path (Z to A)" Tag="NameDescending" />
                                            <ComboBoxItem Content="Path length (long first)" Tag="PathLength" />
                                        </ComboBox>

                                        <CheckBox
                                            x:Name="HideExcludedCheck"
                                            Grid.Column="3"
                                            VerticalAlignment="Center"
                                            Content="Hide excluded"
                                            Checked="OnHideExcludedChanged"
                                            Unchecked="OnHideExcludedChanged" />
                                    </Grid>

                                    <StackPanel
                                        Grid.Row="1"
                                        Orientation="Horizontal"
                                        HorizontalAlignment="Right"
                                        Spacing="{StaticResource Spacing.Size80}">
                                        <Button x:Name="SelectVisibleBtn" Click="OnSelectVisibleCandidates">
                                            <TextBlock Text="Select visible" />
                                        </Button>
                                        <Button x:Name="ClearSelectionBtn" Click="OnClearCandidateSelection">
                                            <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size40}">
                                                <SymbolIcon Symbol="Clear" />
                                                <TextBlock Text="Clear selection" />
                                            </StackPanel>
                                        </Button>
                                        <Button x:Name="ExcludeSelectedBtn" Click="OnExcludeSelectedCandidates">
                                            <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size40}">
                                                <SymbolIcon Symbol="BlockContact" />
                                                <TextBlock Text="Exclude selected" />
                                            </StackPanel>
                                        </Button>
                                        <Button x:Name="IncludeSelectedBtn" Click="OnIncludeSelectedCandidates">
                                            <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size40}">
                                                <SymbolIcon Symbol="Accept" />
                                                <TextBlock Text="Include selected" />
                                            </StackPanel>
                                        </Button>
                                    </StackPanel>

                                    <TreeView
                                        x:Name="CandidatesTree"
                                        Grid.Row="2"
                                        SelectionMode="None">
                                        <TreeView.Resources>
                                            <Style TargetType="TreeViewItem">
                                                <Setter Property="Visibility">
                                                    <Setter.Value>
                                                        <Binding Path="NodeVisibility" />
                                                    </Setter.Value>
                                                </Setter>
                                                <Setter Property="IsExpanded">
                                                    <Setter.Value>
                                                        <Binding Path="IsExpanded" Mode="TwoWay" />
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </TreeView.Resources>
                                        <TreeView.ItemTemplate>
                                            <DataTemplate>
                                                <TreeViewItem ItemsSource="{Binding Children}">
                                                    <TreeViewItem.Header>
                                                        <Border
                                                            Background="{ThemeResource LayerFillColorDefaultBrush}"
                                                            CornerRadius="12"
                                                            Margin="0,2"
                                                            Padding="12"
                                                            Visibility="{Binding NodeVisibility}">
                                                            <Grid ColumnSpacing="{StaticResource Spacing.Size120}" Opacity="{Binding VisualOpacity}">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto" />
                                                                    <ColumnDefinition Width="*" />
                                                                    <ColumnDefinition Width="Auto" />
                                                                </Grid.ColumnDefinitions>
                                                                <CheckBox
                                                                    Grid.Column="0"
                                                                    VerticalAlignment="Center"
                                                                    IsChecked="{Binding IsSelected, Mode=TwoWay}"
                                                                    Visibility="{Binding SelectionVisibility}" />
                                                                <StackPanel Grid.Column="1" Spacing="{StaticResource Spacing.Size40}">
                                                                    <TextBlock
                                                                        Text="{Binding DisplayName}"
                                                                        FontWeight="SemiBold" />
                                                                    <TextBlock
                                                                        Text="{Binding RelativePathDisplay}"
                                                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                                        TextTrimming="CharacterEllipsis"
                                                                        ToolTipService.ToolTip="{Binding FullPath}" />
                                                                </StackPanel>
                                                                <StackPanel
                                                                    Grid.Column="2"
                                                                    Orientation="Horizontal"
                                                                    Spacing="{StaticResource Spacing.Size40}"
                                                                    VerticalAlignment="Center">
                                                                    <InfoBadge
                                                                        Visibility="{Binding PathBadgeVisibility}"
                                                                        ValueString="{Binding PathLengthDisplay}" />
                                                                    <ToggleButton
                                                                        MinWidth="140"
                                                                        IsChecked="{Binding IsExcluded, Mode=TwoWay}"
                                                                        IsEnabled="{Binding CanExclude}"
                                                                        ToolTipService.ToolTip="{Binding ExclusionToolTip}">
                                                                        <ToggleButton.ContentTemplate>
                                                                            <DataTemplate>
                                                                                <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size40}">
                                                                                    <SymbolIcon Symbol="{Binding ExclusionSymbol}" />
                                                                                    <TextBlock Text="{Binding ExclusionLabel}" />
                                                                                </StackPanel>
                                                                            </DataTemplate>
                                                                        </ToggleButton.ContentTemplate>
                                                                    </ToggleButton>
                                                                </StackPanel>
                                                            </Grid>
                                                        </Border>
                                                    </TreeViewItem.Header>
                                                </TreeViewItem>
                                            </DataTemplate>
                                        </TreeView.ItemTemplate>
                                    </TreeView>
                                </Grid>
                            </Grid>
                        </Border>
                    </Grid>
                </ScrollViewer>

                <ScrollViewer
                    x:Name="LargeFilesView"
                    HorizontalScrollBarVisibility="Disabled"
                    Visibility="Collapsed">
                    <Grid Padding="{StaticResource Padding.Page}" RowSpacing="{StaticResource Spacing.Size240}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <Border
                            x:Name="LargeFilesStatusHero"
                            Grid.Row="0"
                            Background="{StaticResource Brush.Hero.Neutral}"
                            CornerRadius="28"
                            Padding="{StaticResource Padding.Hero}">
                            <Grid ColumnSpacing="{StaticResource Spacing.Size240}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <Border
                                    Width="76"
                                    Height="76"
                                    CornerRadius="24"
                                    Background="{StaticResource HeroCardOverlayBrush}"
                                    VerticalAlignment="Center">
                                    <SymbolIcon
                                        x:Name="LargeFilesStatusGlyph"
                                        Symbol="SaveLocal"
                                        Foreground="White"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center" />
                                </Border>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center" Spacing="{StaticResource Spacing.Size80}">
                                    <TextBlock Text="Largest files" Foreground="#B3FFFFFF" FontWeight="SemiBold" />
                                    <TextBlock
                                        x:Name="LargeFilesStatusTitle"
                                        Text="Ready to explore large files"
                                        FontSize="30"
                                        FontWeight="SemiBold"
                                        Foreground="White"
                                        TextWrapping="Wrap" />
                                    <TextBlock
                                        x:Name="LargeFilesStatusDescription"
                                        Text="Choose a location to find the biggest files grouped by type."
                                        Foreground="#E6FFFFFF"
                                        TextWrapping="WrapWholeWords" />
                                </StackPanel>

                                <StackPanel Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Right" Spacing="{StaticResource Spacing.Size40}">
                                    <TextBlock Text="Current results" Foreground="#B3FFFFFF" />
                                    <InfoBadge
                                        x:Name="LargeFilesResultBadge"
                                        HorizontalAlignment="Right"
                                        Visibility="Collapsed" />
                                    <TextBlock
                                        x:Name="LargeFilesSummaryText"
                                        Text="No scan results yet."
                                        Foreground="#E6FFFFFF"
                                        TextWrapping="Wrap"
                                        TextAlignment="Right" />
                                </StackPanel>
                            </Grid>
                        </Border>

                        <Grid
                            x:Name="LargeFilesLayout"
                            Grid.Row="1"
                            ColumnSpacing="{StaticResource Spacing.Size240}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition x:Name="LargeFilesResultsColumn" Width="*" />
                                <ColumnDefinition x:Name="LargeFilesOptionsColumn" Width="360" />
                            </Grid.ColumnDefinitions>

                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup>
                                    <VisualState x:Name="LargeFilesCompactState">
                                        <VisualState.StateTriggers>
                                            <AdaptiveTrigger MinWindowWidth="0" />
                                        </VisualState.StateTriggers>
                                        <VisualState.Setters>
                                            <Setter Target="LargeFilesOptionsColumn.Width" Value="0" />
                                            <Setter Target="LargeFilesLayout.ColumnSpacing" Value="{StaticResource Spacing.Size160}" />
                                            <Setter Target="LargeFilesResultsPanel.(Grid.ColumnSpan)" Value="2" />
                                            <Setter Target="LargeFilesOptionsPanel.(Grid.Row)" Value="1" />
                                            <Setter Target="LargeFilesOptionsPanel.(Grid.Column)" Value="0" />
                                            <Setter Target="LargeFilesOptionsPanel.(Grid.ColumnSpan)" Value="2" />
                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="LargeFilesWideState">
                                        <VisualState.StateTriggers>
                                            <AdaptiveTrigger MinWindowWidth="960" />
                                        </VisualState.StateTriggers>
                                        <VisualState.Setters>
                                            <Setter Target="LargeFilesOptionsColumn.Width" Value="360" />
                                            <Setter Target="LargeFilesLayout.ColumnSpacing" Value="{StaticResource Spacing.Size240}" />
                                            <Setter Target="LargeFilesResultsPanel.(Grid.ColumnSpan)" Value="1" />
                                            <Setter Target="LargeFilesOptionsPanel.(Grid.Row)" Value="0" />
                                            <Setter Target="LargeFilesOptionsPanel.(Grid.Column)" Value="1" />
                                            <Setter Target="LargeFilesOptionsPanel.(Grid.ColumnSpan)" Value="1" />
                                        </VisualState.Setters>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>

                            <StackPanel x:Name="LargeFilesResultsPanel" Grid.Column="0" Spacing="{StaticResource Spacing.Size160}">
                                <Border Style="{StaticResource CardStyle}">
                                    <StackPanel Spacing="{StaticResource Spacing.Size160}">
                                        <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}">
                                            <Border
                                                Width="40"
                                                Height="40"
                                                CornerRadius="14"
                                                Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                                VerticalAlignment="Center">
                                                <SymbolIcon
                                                    Symbol="SaveLocal"
                                                    Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center" />
                                            </Border>
                                            <StackPanel>
                                                <TextBlock Text="Largest files" FontSize="22" FontWeight="SemiBold" />
                                                <TextBlock
                                                    x:Name="LargeFilesResultsCaption"
                                                    Text="Scan results will appear here after you run a scan."
                                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                    TextWrapping="Wrap" />
                                            </StackPanel>
                                        </StackPanel>

                                        <ItemsControl x:Name="LargeFilesGroupList">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <StackPanel Spacing="{StaticResource Spacing.Size160}" />
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <StackPanel Spacing="{StaticResource Spacing.Size120}">
                                                        <Grid ColumnSpacing="{StaticResource Spacing.Size120}">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*" />
                                                                <ColumnDefinition Width="Auto" />
                                                            </Grid.ColumnDefinitions>
                                                            <TextBlock Text="{Binding DisplayName}" FontSize="18" FontWeight="SemiBold" />
                                                            <TextBlock
                                                                Grid.Column="1"
                                                                Text="{Binding Summary}"
                                                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                                HorizontalAlignment="Right" />
                                                        </Grid>
                                                        <ItemsControl ItemsSource="{Binding Items}">
                                                            <ItemsControl.ItemsPanel>
                                                                <ItemsPanelTemplate>
                                                                    <StackPanel Spacing="{StaticResource Spacing.Size120}" />
                                                                </ItemsPanelTemplate>
                                                            </ItemsControl.ItemsPanel>
                                                            <ItemsControl.ItemTemplate>
                                                                <DataTemplate>
                                                                    <Border Padding="16" Background="{ThemeResource LayerFillColorDefaultBrush}" CornerRadius="12">
                                                                        <Grid ColumnSpacing="{StaticResource Spacing.Size120}">
                                                                            <Grid.ColumnDefinitions>
                                                                                <ColumnDefinition Width="*" />
                                                                                <ColumnDefinition Width="Auto" />
                                                                            </Grid.ColumnDefinitions>
                                                                            <StackPanel Spacing="{StaticResource Spacing.Size80}">
                                                                                <Grid ColumnSpacing="{StaticResource Spacing.Size120}">
                                                                                    <Grid.ColumnDefinitions>
                                                                                        <ColumnDefinition Width="*" />
                                                                                        <ColumnDefinition Width="Auto" />
                                                                                    </Grid.ColumnDefinitions>
                                                                                    <TextBlock Text="{Binding Name}" FontWeight="SemiBold" TextTrimming="CharacterEllipsis" />
                                                                                    <TextBlock
                                                                                        Grid.Column="1"
                                                                                        Text="{Binding SizeDisplay}"
                                                                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                                                                </Grid>
                                                                                <TextBlock
                                                                                    Text="{Binding Directory}"
                                                                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                                                    TextWrapping="Wrap"
                                                                                    TextTrimming="CharacterEllipsis"
                                                                                    ToolTipService.ToolTip="{Binding Directory}" />
                                                                                <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}">
                                                                                    <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size60}">
                                                                                        <Border
                                                                                            Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                                                                            CornerRadius="8"
                                                                                            Padding="8,2"
                                                                                            VerticalAlignment="Center">
                                                                                            <TextBlock
                                                                                                Text="{Binding ExtensionDisplay}"
                                                                                                Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}" />
                                                                                        </Border>
                                                                                        <TextBlock
                                                                                            Text="{Binding TypeName}"
                                                                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                                                            TextTrimming="CharacterEllipsis" />
                                                                                    </StackPanel>
                                                                                    <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size80}" HorizontalAlignment="Right">
                                                                                        <Button Tag="{Binding}" Click="OnLargeFileOpen">
                                                                                            <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size60}">
                                                                                                <SymbolIcon Symbol="OpenFile" />
                                                                                                <TextBlock Text="Open" />
                                                                                            </StackPanel>
                                                                                        </Button>
                                                                                        <Button Tag="{Binding}" Click="OnLargeFileDelete">
                                                                                            <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size60}">
                                                                                                <SymbolIcon Symbol="Delete" />
                                                                                                <TextBlock Text="Delete" />
                                                                                            </StackPanel>
                                                                                        </Button>
                                                                                        <Button Tag="{Binding}" Click="OnLargeFileExclude">
                                                                                            <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size60}">
                                                                                                <SymbolIcon Symbol="BlockContact" />
                                                                                                <TextBlock Text="Exclude" />
                                                                                            </StackPanel>
                                                                                        </Button>
                                                                                    </StackPanel>
                                                                                </StackPanel>
                                                                            </StackPanel>
                                                                        </Grid>
                                                                    </Border>
                                                                </DataTemplate>
                                                            </ItemsControl.ItemTemplate>
                                                        </ItemsControl>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </StackPanel>
                                </Border>
                            </StackPanel>

                            <StackPanel x:Name="LargeFilesOptionsPanel" Grid.Column="1" Spacing="{StaticResource Spacing.Size160}">
                                <Border Style="{StaticResource CardStyle}">
                                    <StackPanel Spacing="{StaticResource Spacing.Size200}">
                                        <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}">
                                            <Border
                                                Width="40"
                                                Height="40"
                                                CornerRadius="14"
                                                Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                                VerticalAlignment="Center">
                                                <SymbolIcon
                                                    Symbol="Folder"
                                                    Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center" />
                                            </Border>
                                            <StackPanel>
                                                <TextBlock Text="Scan setup" FontSize="22" FontWeight="SemiBold" />
                                                <TextBlock
                                                    Text="Choose a location and customize the large file scan."
                                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                    TextWrapping="Wrap" />
                                            </StackPanel>
                                        </StackPanel>

                                        <StackPanel Spacing="{StaticResource Spacing.Size160}">
                                            <Grid ColumnSpacing="{StaticResource Spacing.Size120}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>
                                                <TextBox
                                                    x:Name="LargeFilesRootPathBox"
                                                    Grid.Column="0"
                                                    PlaceholderText="Select a root folder…"
                                                    TextChanged="OnLargeFilesRootPathChanged" />
                                                <Button x:Name="LargeFilesBrowseBtn" Grid.Column="1" Click="OnLargeFilesBrowse">
                                                    <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size60}">
                                                        <SymbolIcon Symbol="OpenFile" />
                                                        <TextBlock Text="Browse" />
                                                    </StackPanel>
                                                </Button>
                                            </Grid>

                                            <Button x:Name="LargeFilesScanBtn" Click="OnLargeFilesScan">
                                                <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size60}">
                                                    <SymbolIcon Symbol="Find" />
                                                    <TextBlock Text="Scan for large files" />
                                                </StackPanel>
                                            </Button>

                                            <CheckBox x:Name="LargeFilesIncludeSubfoldersCheck" IsChecked="True">
                                                <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size80}">
                                                    <SymbolIcon Symbol="AllApps" />
                                                    <TextBlock Text="Include subfolders" />
                                                </StackPanel>
                                            </CheckBox>

                                            <CheckBox x:Name="LargeFilesRecycleChk" IsChecked="True">
                                                <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size80}">
                                                    <SymbolIcon Symbol="Delete" />
                                                    <TextBlock Text="Send deleted files to Recycle Bin" />
                                                </StackPanel>
                                            </CheckBox>

                                            <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}" VerticalAlignment="Center">
                                                <SymbolIcon
                                                    Symbol="Sort"
                                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                                <TextBlock VerticalAlignment="Center" Text="Max results" />
                                                <NumberBox
                                                    x:Name="LargeFilesMaxItemsBox"
                                                    Width="96"
                                                    Minimum="1"
                                                    Maximum="1000"
                                                    Value="100" />
                                            </StackPanel>

                                            <StackPanel Spacing="{StaticResource Spacing.Size40}">
                                                <TextBlock Text="Exclude patterns" FontWeight="SemiBold" />
                                                <TextBox
                                                    x:Name="LargeFilesExclusionsBox"
                                                    PlaceholderText="*.bak; temp/*"
                                                    AcceptsReturn="False" />
                                                <TextBlock
                                                    Text="Use semicolons to exclude names or relative paths."
                                                    FontSize="12"
                                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                            </StackPanel>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>

                                <Border Style="{StaticResource CardStyle}">
                                    <StackPanel Spacing="{StaticResource Spacing.Size200}">
                                        <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}">
                                            <Border
                                                Width="40"
                                                Height="40"
                                                CornerRadius="14"
                                                Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                                VerticalAlignment="Center">
                                                <SymbolIcon
                                                    Symbol="Clock"
                                                    Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center" />
                                            </Border>
                                            <TextBlock Text="Activity" FontSize="22" FontWeight="SemiBold" VerticalAlignment="Center" />
                                        </StackPanel>

                                        <TextBlock
                                            x:Name="LargeFilesActivityText"
                                            Text="Waiting for the next action."
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                            TextWrapping="Wrap" />

                                        <ProgressBar
                                            x:Name="LargeFilesProgress"
                                            Height="4"
                                            Visibility="Collapsed"
                                            IsIndeterminate="True" />

                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                            <Button x:Name="LargeFilesCancelBtn" Click="OnLargeFilesCancel" Visibility="Collapsed" IsEnabled="False">
                                                <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size60}">
                                                    <SymbolIcon Symbol="Cancel" />
                                                    <TextBlock Text="Cancel" />
                                                </StackPanel>
                                            </Button>
                                        </StackPanel>

                                        <InfoBar x:Name="LargeFilesInfoBar" IsOpen="False" />
                                    </StackPanel>
                                </Border>

                                <Border Style="{StaticResource CardStyle}">
                                    <StackPanel Spacing="{StaticResource Spacing.Size200}">
                                        <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}">
                                            <Border
                                                Width="40"
                                                Height="40"
                                                CornerRadius="14"
                                                Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                                VerticalAlignment="Center">
                                                <SymbolIcon
                                                    Symbol="BlockContact"
                                                    Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center" />
                                            </Border>
                                            <StackPanel>
                                                <TextBlock Text="Excluded paths" FontSize="22" FontWeight="SemiBold" />
                                                <TextBlock
                                                    Text="Files excluded from future scans appear here."
                                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                    TextWrapping="Wrap" />
                                            </StackPanel>
                                        </StackPanel>

                                        <ListView
                                            x:Name="LargeFilesExclusionsList"
                                            MaxHeight="240"
                                            SelectionMode="None">
                                            <ListView.ItemTemplate>
                                                <DataTemplate>
                                                    <Grid ColumnSpacing="{StaticResource Spacing.Size120}">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition Width="Auto" />
                                                        </Grid.ColumnDefinitions>
                                                        <TextBlock
                                                            Text="{Binding}"
                                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                            TextWrapping="Wrap"
                                                            ToolTipService.ToolTip="{Binding}" />
                                                        <Button Grid.Column="1" Tag="{Binding}" Click="OnLargeFilesRemoveExclusion">
                                                            <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size60}">
                                                                <SymbolIcon Symbol="Delete" />
                                                                <TextBlock Text="Remove" />
                                                            </StackPanel>
                                                        </Button>
                                                    </Grid>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>
                                        </ListView>

                                        <TextBlock
                                            x:Name="LargeFilesNoExclusionsText"
                                            Text="No exclusions yet."
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}" />

                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                            <Button x:Name="LargeFilesClearExclusionsBtn" Click="OnLargeFilesClearExclusions" IsEnabled="False">
                                                <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size60}">
                                                    <SymbolIcon Symbol="Clear" />
                                                    <TextBlock Text="Clear all" />
                                                </StackPanel>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </Grid>
                    </Grid>
                </ScrollViewer>

                <ScrollViewer
                    x:Name="DiskCleanupView"
                    HorizontalScrollBarVisibility="Disabled"
                    Visibility="Collapsed">
                    <Grid Padding="{StaticResource Padding.Page}" RowSpacing="{StaticResource Spacing.Size240}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <Border Grid.Row="0" Background="{StaticResource Brush.Hero.Neutral}" CornerRadius="28" Padding="{StaticResource Padding.Hero}">
                            <Grid ColumnSpacing="{StaticResource Spacing.Size240}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <Border
                                    Width="76"
                                    Height="76"
                                    CornerRadius="24"
                                    Background="{StaticResource HeroCardOverlayBrush}"
                                    VerticalAlignment="Center">
                                    <FontIcon
                                        Glyph="&#xE74D;"
                                        FontFamily="Segoe MDL2 Assets"
                                        Foreground="White"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center" />
                                </Border>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center" Spacing="{StaticResource Spacing.Size80}">
                                    <TextBlock Text="Disk cleanup" Foreground="#B3FFFFFF" FontWeight="SemiBold" />
                                    <TextBlock
                                        x:Name="DiskCleanupIntro"
                                        Text="Analyze Windows cleanup handlers to reclaim temporary files."
                                        Foreground="#E6FFFFFF"
                                        TextWrapping="Wrap" />
                                    <TextBlock
                                        x:Name="DiskCleanupStatusText"
                                        Text="Ready to analyze Windows disk cleanup handlers."
                                        Foreground="#E6FFFFFF"
                                        TextWrapping="Wrap" />
                                </StackPanel>
                            </Grid>
                        </Border>

                        <Border Grid.Row="1" Style="{StaticResource CardStyle}">
                            <StackPanel Spacing="{StaticResource Spacing.Size160}">
                                <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}">
                                    <Border
                                        Width="40"
                                        Height="40"
                                        CornerRadius="14"
                                        Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                        VerticalAlignment="Center">
                                        <FontIcon
                                            Glyph="&#xE74D;"
                                            FontFamily="Segoe MDL2 Assets"
                                            Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center" />
                                    </Border>
                                    <TextBlock Text="Cleanup categories" FontSize="22" FontWeight="SemiBold" VerticalAlignment="Center" />
                                </StackPanel>

                                <TextBlock
                                    x:Name="DiskCleanupActivityText"
                                    Text="Waiting for the next action."
                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                    TextWrapping="Wrap" />

                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="{StaticResource Spacing.Size80}">
                                    <Button x:Name="DiskCleanupAnalyzeBtn" Click="OnDiskCleanupAnalyze">
                                        <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size60}">
                                            <SymbolIcon Symbol="Refresh" />
                                            <TextBlock Text="Analyze" />
                                        </StackPanel>
                                    </Button>
                                    <Button x:Name="DiskCleanupCleanBtn" Click="OnDiskCleanupClean" IsEnabled="False">
                                        <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size60}">
                                            <SymbolIcon Symbol="Delete" />
                                            <TextBlock Text="Clean selected" />
                                        </StackPanel>
                                    </Button>
                                    <Button x:Name="DiskCleanupCancelBtn" Click="OnCancel" Visibility="Collapsed" IsEnabled="False">
                                        <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size60}">
                                            <SymbolIcon Symbol="Cancel" />
                                            <TextBlock Text="Cancel" />
                                        </StackPanel>
                                    </Button>
                                </StackPanel>

                                <ProgressBar
                                    x:Name="DiskCleanupProgress"
                                    Height="4"
                                    Visibility="Collapsed"
                                    IsIndeterminate="True" />

                                <InfoBar x:Name="DiskCleanupInfoBar" IsOpen="False" />

                                <ListView
                                    x:Name="DiskCleanupList"
                                    SelectionMode="None"
                                    IsItemClickEnabled="False">
                                    <ListView.ItemTemplate>
                                        <DataTemplate>
                                            <CheckBox
                                                Padding="0"
                                                HorizontalContentAlignment="Stretch"
                                                IsChecked="{Binding IsSelected, Mode=TwoWay}"
                                                IsEnabled="{Binding CanSelect}">
                                                <Grid ColumnSpacing="12">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto" />
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="Auto" />
                                                    </Grid.ColumnDefinitions>
                                                    <Border
                                                        Width="32"
                                                        Height="32"
                                                        CornerRadius="12"
                                                        Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center">
                                                        <FontIcon
                                                            Glyph="&#xE74D;"
                                                            FontFamily="Segoe MDL2 Assets"
                                                            Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center" />
                                                    </Border>
                                                    <StackPanel Grid.Column="1" Spacing="2">
                                                        <TextBlock
                                                            Text="{Binding Name}"
                                                            FontWeight="SemiBold"
                                                            TextWrapping="Wrap" />
                                                        <TextBlock
                                                            Text="{Binding Description}"
                                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                            TextWrapping="Wrap" />
                                                        <TextBlock
                                                            Text="{Binding ErrorMessage}"
                                                            Foreground="{ThemeResource SystemFillColorCriticalBrush}"
                                                            TextWrapping="Wrap" />
                                                    </StackPanel>
                                                    <TextBlock
                                                        Grid.Column="2"
                                                        Text="{Binding FormattedSize}"
                                                        HorizontalAlignment="Right"
                                                        VerticalAlignment="Center"
                                                        FontWeight="SemiBold" />
                                                </Grid>
                                            </CheckBox>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>
                                </ListView>
                            </StackPanel>
                        </Border>
                    </Grid>
                </ScrollViewer>

                <ScrollViewer
                    x:Name="SettingsView"
                    HorizontalScrollBarVisibility="Disabled"
                    Visibility="Collapsed">
                    <StackPanel Padding="{StaticResource Padding.Page}" Spacing="{StaticResource Spacing.Size240}">
                        <StackPanel Spacing="4">
                            <TextBlock Text="Settings" FontSize="32" FontWeight="SemiBold" />
                            <TextBlock
                                Text="Adjust Smart Cleaner to match your preferences."
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        </StackPanel>

                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel Spacing="{StaticResource Spacing.Size200}">
                                <TextBlock Text="About" FontSize="22" FontWeight="SemiBold" />
                                <StackPanel Spacing="{StaticResource Spacing.Size40}">
                                    <TextBlock Text="Smart Cleaner for Windows" FontWeight="SemiBold" />
                                    <TextBlock
                                        Text="A modern utility for tidying empty folders and reclaiming disk space."
                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                        TextWrapping="Wrap" />
                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                        <FontIcon
                                            Glyph="&#xE946;"
                                            FontFamily="{StaticResource SymbolThemeFontFamily}"
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                        <TextBlock Text="Version 1.0" Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                    </StackPanel>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}">
                                    <HyperlinkButton Content="Documentation" NavigateUri="https://github.com/MihaiCristianCondrea/Smart-Cleaner-for-Windows" />
                                    <HyperlinkButton Content="Privacy policy" NavigateUri="https://github.com/MihaiCristianCondrea/Smart-Cleaner-for-Windows/blob/main/PRIVACY.md" />
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel Spacing="{StaticResource Spacing.Size200}">
                                <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}">
                                    <Border
                                        Width="40"
                                        Height="40"
                                        CornerRadius="14"
                                        Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                        VerticalAlignment="Center">
                                        <SymbolIcon
                                            Symbol="Setting"
                                            Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center" />
                                    </Border>
                                    <StackPanel>
                                        <TextBlock Text="Cleaner defaults" FontSize="22" FontWeight="SemiBold" />
                                        <TextBlock
                                            Text="Choose how empty folders are handled by default before each run."
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                            TextWrapping="Wrap" />
                                    </StackPanel>
                                </StackPanel>

                                <StackPanel Spacing="{StaticResource Spacing.Size160}">
                                    <TextBlock
                                        x:Name="CleanerDefaultsSummaryText"
                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                        Text="Recycle Bin • No depth limit" />

                                    <ToggleSwitch
                                        x:Name="CleanerRecycleToggle"
                                        Header="Send deleted folders to Recycle Bin"
                                        OnContent="Recycle Bin"
                                        OffContent="Delete permanently"
                                        Toggled="OnCleanerRecyclePreferenceToggled" />

                                    <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}" VerticalAlignment="Center">
                                        <SymbolIcon
                                            Symbol="Sort"
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                        <TextBlock VerticalAlignment="Center" Text="Default depth limit" />
                                        <NumberBox
                                            x:Name="CleanerDepthPreferenceBox"
                                            Width="96"
                                            Minimum="0"
                                            Maximum="999"
                                            ValueChanged="OnCleanerDepthPreferenceChanged" />
                                    </StackPanel>

                                    <StackPanel Spacing="{StaticResource Spacing.Size40}">
                                        <TextBlock Text="Default exclusions" FontWeight="SemiBold" />
                                        <TextBox
                                            x:Name="CleanerExclusionsPreferenceBox"
                                            PlaceholderText=".git; build/*; node_modules"
                                            TextChanged="OnCleanerExclusionsPreferenceChanged" />
                                        <TextBlock
                                            Text="Use semicolons to separate names or wildcard patterns."
                                            FontSize="12"
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                        <Button Click="OnApplyCleanerDefaults">
                                            <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size60}">
                                                <SymbolIcon Symbol="Sync" />
                                                <TextBlock Text="Apply to current session" />
                                            </StackPanel>
                                        </Button>
                                    </StackPanel>

                                    <InfoBar x:Name="CleanerDefaultsInfoBar" IsOpen="False" />
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel Spacing="{StaticResource Spacing.Size200}">
                                <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}">
                                    <Border
                                        Width="40"
                                        Height="40"
                                        CornerRadius="14"
                                        Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                        VerticalAlignment="Center">
                                        <SymbolIcon
                                            Symbol="Sync"
                                            Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center" />
                                    </Border>
                                    <StackPanel>
                                        <TextBlock Text="Automation" FontSize="22" FontWeight="SemiBold" />
                                        <TextBlock
                                            Text="Streamline routine scans with automation options."
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                            TextWrapping="Wrap" />
                                    </StackPanel>
                                </StackPanel>

                                <StackPanel Spacing="{StaticResource Spacing.Size160}">
                                    <TextBlock
                                        x:Name="AutomationSummaryText"
                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                        Text="Automation disabled" />

                                    <ToggleSwitch
                                        x:Name="AutomationAutoPreviewToggle"
                                        Header="Automatically run Preview after selecting a folder"
                                        Toggled="OnAutomationPreferenceToggled" />

                                    <ToggleSwitch
                                        x:Name="AutomationReminderToggle"
                                        Header="Remind me to clean weekly"
                                        Toggled="OnAutomationPreferenceToggled" />
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel Spacing="{StaticResource Spacing.Size200}">
                                <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}">
                                    <Border
                                        Width="40"
                                        Height="40"
                                        CornerRadius="14"
                                        Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                        VerticalAlignment="Center">
                                        <SymbolIcon
                                            Symbol="Message"
                                            Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center" />
                                    </Border>
                                    <StackPanel>
                                        <TextBlock Text="Notifications" FontSize="22" FontWeight="SemiBold" />
                                        <TextBlock
                                            Text="Choose how Smart Cleaner keeps you informed."
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                            TextWrapping="Wrap" />
                                    </StackPanel>
                                </StackPanel>

                                <StackPanel Spacing="{StaticResource Spacing.Size160}">
                                    <TextBlock
                                        x:Name="NotificationSummaryText"
                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                        Text="All notifications enabled" />

                                    <ToggleSwitch
                                        x:Name="NotificationCompletionToggle"
                                        Header="Show a summary after cleaning"
                                        IsOn="True"
                                        Toggled="OnNotificationPreferenceToggled" />

                                    <ToggleSwitch
                                        x:Name="NotificationDesktopToggle"
                                        Header="Send desktop alerts when automation runs"
                                        Toggled="OnNotificationPreferenceToggled" />
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel Spacing="{StaticResource Spacing.Size200}">
                                <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}">
                                    <Border
                                        Width="40"
                                        Height="40"
                                        CornerRadius="14"
                                        Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                        VerticalAlignment="Center">
                                        <SymbolIcon
                                            Symbol="Save"
                                            Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center" />
                                    </Border>
                                    <StackPanel>
                                        <TextBlock Text="History &amp; data" FontSize="22" FontWeight="SemiBold" />
                                        <TextBlock
                                            Text="Control how long Smart Cleaner keeps past actions."
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                            TextWrapping="Wrap" />
                                    </StackPanel>
                                </StackPanel>

                                <StackPanel Spacing="{StaticResource Spacing.Size160}">
                                    <TextBlock
                                        x:Name="HistoryRetentionSummaryText"
                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                        Text="Keep history for 30 days" />

                                    <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}" VerticalAlignment="Center">
                                        <SymbolIcon
                                            Symbol="Calendar"
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                        <TextBlock VerticalAlignment="Center" Text="Days to keep history" />
                                        <NumberBox
                                            x:Name="HistoryRetentionNumberBox"
                                            Width="96"
                                            Minimum="0"
                                            Maximum="365"
                                            Value="30"
                                            ValueChanged="OnHistoryRetentionChanged" />
                                    </StackPanel>

                                    <TextBlock
                                        Text="Set to 0 to clear history automatically after each run."
                                        FontSize="12"
                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel Spacing="{StaticResource Spacing.Size200}">
                                <StackPanel Orientation="Horizontal" Spacing="{StaticResource Spacing.Size120}">
                                    <Border
                                        Width="40"
                                        Height="40"
                                        CornerRadius="14"
                                        Background="{ThemeResource AccentFillColorTertiaryBrush}"
                                        VerticalAlignment="Center">
                                        <SymbolIcon
                                            Symbol="Highlight"
                                            Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center" />
                                    </Border>
                                    <StackPanel>
                                        <TextBlock Text="Personalization" FontSize="22" FontWeight="SemiBold" />
                                        <TextBlock
                                            Text="Preview theme and accent tweaks before applying them."
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                            TextWrapping="Wrap" />
                                    </StackPanel>
                                </StackPanel>

                                <Grid ColumnSpacing="{StaticResource Spacing.Size200}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="2*" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0" Spacing="{StaticResource Spacing.Size160}">
                                        <StackPanel Spacing="{StaticResource Spacing.Size80}">
                                            <Grid ColumnSpacing="{StaticResource Spacing.Size160}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>

                                                <StackPanel Spacing="{StaticResource Spacing.Size40}">
                                                    <TextBlock Text="App theme" FontSize="18" FontWeight="SemiBold" />
                                                    <TextBlock
                                                        Text="Choose how Smart Cleaner looks."
                                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                        TextWrapping="Wrap" />
                                                </StackPanel>

                                                <TextBlock
                                                    x:Name="ThemeSummaryText"
                                                    Grid.Column="1"
                                                    Text="Use system setting"
                                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                    VerticalAlignment="Center" />
                                            </Grid>

                                            <RadioButtons
                                                x:Name="ThemeRadioButtons"
                                                MaxColumns="1"
                                                SelectionChanged="OnThemeSelectionChanged">
                                                <RadioButton Content="Light" Tag="light" />
                                                <RadioButton Content="Dark" Tag="dark" />
                                                <RadioButton Content="Use system setting" Tag="default" />
                                            </RadioButtons>
                                        </StackPanel>

                                        <StackPanel Spacing="{StaticResource Spacing.Size80}">
                                            <Grid ColumnSpacing="{StaticResource Spacing.Size160}">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="Auto" />
                                            </Grid.ColumnDefinitions>

                                                <StackPanel Spacing="{StaticResource Spacing.Size40}">
                                                    <TextBlock Text="Accent color" FontSize="18" FontWeight="SemiBold" />
                                                    <TextBlock
                                                        Text="Personalize buttons and highlights with a custom accent."
                                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                        TextWrapping="Wrap" />
                                                </StackPanel>

                                                <TextBlock
                                                    x:Name="AccentSummaryText"
                                                    Grid.Column="1"
                                                    Text="Use system setting"
                                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                    VerticalAlignment="Center" />
                                            </Grid>

                                            <RadioButtons
                                                x:Name="AccentColorRadioButtons"
                                                MaxColumns="1"
                                                SelectionChanged="OnAccentPreferenceChanged">
                                                <RadioButton Content="Zest (default color scheme)" Tag="zest" />
                                                <RadioButton Content="Use system setting" Tag="default" />
                                            </RadioButtons>
                                        </StackPanel>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1" Spacing="{StaticResource Spacing.Size120}" VerticalAlignment="Center">
                                        <TextBlock Text="Preview" FontWeight="SemiBold" />
                                        <Border
                                            Padding="16"
                                            CornerRadius="12"
                                            Background="{ThemeResource LayerFillColorDefaultBrush}">
                                            <StackPanel Spacing="{StaticResource Spacing.Size80}">
                                                <Rectangle Height="12" Fill="{ThemeResource AccentFillColorDefaultBrush}" RadiusX="4" RadiusY="4" />
                                                <StackPanel Spacing="{StaticResource Spacing.Size60}">
                                                    <Rectangle Height="8" Fill="{ThemeResource TextFillColorPrimaryBrush}" RadiusX="4" RadiusY="4" />
                                                    <Rectangle Height="8" Fill="{ThemeResource TextFillColorSecondaryBrush}" RadiusX="4" RadiusY="4" />
                                                    <Rectangle Height="8" Fill="{ThemeResource TextFillColorSecondaryBrush}" RadiusX="4" RadiusY="4" Width="120" />
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </NavigationView.Content>
    </NavigationView>
    </Grid>
</Window>
